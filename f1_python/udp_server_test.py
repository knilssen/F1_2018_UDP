import socket
import ctypes
import binascii
import time
from scapy.all import *


# Use the ip and the port set is the games udp settings
UDP_IP = "127.0.0.1"
UDP_PORT = 5003


print "UDP target IP:", UDP_IP
print "UDP target port:", UDP_PORT

# Motion data
MotionData = binascii.unhexlify('e207010069b6f822031dff94149a393f1e0000000196990ec4c3094ec05f69d343342d06bc54708e3fec0eccbadb80fbff45f1bb0e0000db80a496dd39a2b1aabbb245b6bc5ed3d7bfbc1335b9a2b24e37172711c4144e44c04b79b7431bd71440a5c57dba1855afc1840db5ffb980477f0000840d78de653c831784baf71a85ba6d4a4240ad4b8c392f1ec6373d1a04c4aeeaf03f8822a0c330226d418dffbc3db9611ec1e466b400dfb3224cbfffe466a80098bf3366673e176893bd204d0d40ea0f54bb67ec023be0b31cc4798e61c04f7f2a44fc1696409104f03ecd8ea1c27707d3003a80c67fba00780720702bbe03b34b3e3b463cbd85534540e16cc6bbac6ababbe07f1ac4fa1039c027540b44093cf1401706d13ee0e4a3c2c10bb9008d80737f2101c30bcff587bd0e547c3e295129bcbe2c4340f67718bc9d9410bc06c1b8c302b48dc0edb14744af6b03c16dfefbbef0b6ab42d1f35aff697f9680e9ffd1f32c01af3cb7c53dbd3ceb403d0345c3bdaf799cba24d53a3ac78c47c3ed25ac40c85867c42ae6a9427e16383f303e50c1957e220116edf212f4fa7c7e1574a8bf9bd30a3e7e03fdbc3314dc3f327240bb6a98213dfbf143c2483c90bfb7e48ac3b20186c2dbe4c73f738867422b9f5c02aa5352acffff269fa96f1dbe9e1cbf3d1f61a33de2ae5bbf6961643cff4a1c38322d09c45fdb9a3fe91a4bc39df8a040ccb3d33e02b787c2720969005b80a57f53ff7209e7c0c93c916724c0c7f1483d5c55444015e9a43b4624ad3b7aba19c46e6434c0cc560944ae05ef40ccd4cf3e9d56aac2090bb3007c80837f1e010b0b28f84dbb535b1d3ec3d22ebc0a8943408fb016bcae770fbc4ed7a7c331be17c0ed24d64314f0fbc02283e6bee8fda64200f46aff6e7f92801f0000f4a2e2133dc395863eae095f3d4053c0bd348c0d3ad18b7fbabbd31e43d601d440e9396cc453ac2242fe52cfbd6d48f0bfdc7f23ff2efad505ee01d97fa3357e3efc7a0cc01c7269bdc5e5ce3ff019c73b630877bc3f6efec3094d2d400d9ed6c3224e24c1d7c6813e45f62ac201e296009383697cecfdffe154a501bfc738023f12c3543c30eb39c0d0368a3c3a19853ca689fdc336c8064039eca3c38df38e419077113e9ab3e8c06078710082d47f2b81fe5e78c0bc9c3fcfa843bf32e57ebda371f53f71583d3af8e43f3cd5c2a9c3e35228c04f04ed437695fac0a7b101bf1fb1a74216f44dff707f90803c0017f4cf773b3dc248623eaa58d13c24ecbebdda17ad3a4fe5f0ba35a7cb43c35ca240204f83c4d1d676423472c2be4b95abc1e47847fff5d5062a9cfde078c718023d64742b3fc79e963d4fe2f33f407c3c3c9c40993c27f19fc3651aa2bf5f9883438713e4c0e5d511bfb23e98420cf425ff6f7f9480050210f48190d4bcbe78d13eedf5c2bc8d8ebfbdba2f773c664a81bcd15ef642f5a3d24025d56bc4d4617e424ec0013e33e22cc0e37faaffc3fa3e05c800e27fad56b83e71485bc003cb593b874ece3fbde41c3ba1f3c8bbab860fc476cf4bc063d0e4433d9c72bae0968b3f18c54bbcdb80ecff46f1ba0efcffdb803d57d23dd2e31abc3702d5bc28d3d7bf52861bba38840339cf97cdc2e0f8c040931f69c4de89af42e5a9ec3ed66785c0d87fcb00e2f92106a9fdd37f324e47bb6680dd3d942ea4bd3132cf3faaf7aebbdcfc953c59792e3f828b2b3fa7f8a33faa6ba33f0aad18c0ed993a40755b00c0c2aa1840d7b910c3591d4c43ea5bc9c217162843a786b0413487b041d858b041de59b0415dea813afad2803ae9a3afb719e9aeb73cc7ef3a60b54c3def50b0410c0deab929b794392d13c3bb43aceb3be8a6fd39ae77c0bd9c1be338')
# Session Data
SessionData = binascii.unhexlify('e207010169b6f822031dff946da2893f2d00000001001f1835a6160a0b00630c201c500000ff0011265fd03c00486aa53d00f6e8053e0026e53e3e02d7346e3e0070418c3e008b2cae3e00d607cf3e024e9ef63e0001c8073f008c5f163f00e3601e3f009e26283f001c5d433f00dac05c3f00577b6a3f007dac713f0000000000000000000000000000000000000000000000')
# Lap Data
LapData = binascii.unhexlify('e207010269b6f822031dff94797e873f2c00000001b765ad4259917445b765ad42f051a040f051a0400078374387b52f4800000080131f00010000110006c06bb3421a8a774100000000000000000000000000887543920a7f4800000080042e010000000f030220e3ab421a144241e073aa42000000000000000000de6a440eb87f4800000080032e00000000050402e0c3ab42c115ab426018ab4200fadc4180a2ea41408bb34500c07e4800000080052d0002000004040260acae42ef5d623fa0c9ac42000000000000000000909142d835794800000080112d0000000013040260fbaf42613d95425f60af42009bdf418055f041a01b9a45fa4a784800000080122c000200000a04026014ae429001d841008bad420000000000000000801bdd44dddd7a48000000800c2d000000000704020037af42be87624200a1ad42001bdb418017e841004e6a45decc7c4800000080092d00020000090402a0f5af421a1f1741a505ae42000000000000000000874f442df37948000000800f2d000000001204022079b042759a713f80c2ad42000000000000000000f8a3422538794800000080102d000000000b040200e8ad42c10c8a4207daad4200c3d94100bbec4120778e455f977d4800000080072d00020000010402a08aad4290cdf241d026ad4200acdc410000000040fa03458f337b48000000800b2d000100000804020006ae4290478841d87fad42000000000000000000dc87445e337a48000000800d2d000000000d04022094ae421a3054418256ad42000000000000000000067144ac147a48000000800e2d000000000e0402a0baad4261b48b425b92ac42005cdc41001ced4100e78f45dea27d4800000080062d0002000002040240aaaa424a69124240aaaa420021dc410000000040551645fb7c7b48000000800a2d000100000c040240d5ae4241c88742cbbeae4200dfdd4100afef41203589454f6d7d4800000080082d00020000060402003dab429058ea4140d7aa42803cda4100000000002a0245ec6a804800000080012e00010000000402cca5ae42d4867445cca5ae42f051a040f051a04000801443a306194800000080141b000100001000060083ab421025d4412001ab4200000000000000000050e944e84f804800000080022e00000000030402')
# Event data

# Participant data
ParticipantData = binascii.unhexlify('e207010469b6f822031dff9463562141ac01000001120112080207532e2056414e444f4f524e450000000000000000000000000000000000000000000000000000000000000000000000000002020303442e2052494343494152444f000000000000000000000000000000000000000000000000000000000000000000000000010d01051d532e2056455454454c000000000000000000000000000000000000000000000000000000000000000000000000000000010601071b4b2e2052c384494b4bc3964e454e00000000000000000000000000000000000000000000000000000000000000000000010c07081c522e2047524f534a45414e00000000000000000000000000000000000000000000000000000000000000000000000000010809094f4d2e204552494353534f4e00000000000000000000000000000000000000000000000000000000000000000000000000013b060a1c502e204741534c5900000000000000000000000000000000000000000000000000000000000000000000000000000000010e040b34532e20504552455a000000000000000000000000000000000000000000000000000000000000000000000000000000000103080e4e462e20414c4f4e534f000000000000000000000000000000000000000000000000000000000000000000000000000000013a091035432e204c45434c4552430000000000000000000000000000000000000000000000000000000000000000000000000000011303120d4c2e205354524f4c4c000000000000000000000000000000000000000000000000000000000000000000000000000000010b0714154b2e204d41474e555353454e000000000000000000000000000000000000000000000000000000000000000000000000010a051b1d4e2e2048c39c4c4b454e4245524700000000000000000000000000000000000000000000000000000000000000000000013c061c36422e20484152544c455900000000000000000000000000000000000000000000000000000000000000000000000000000111041f1c452e204f434f4e000000000000000000000000000000000000000000000000000000000000000000000000000000000001090221164d2e205645525354415050454e0000000000000000000000000000000000000000000000000000000000000000000000013d032344532e205349524f544b494e000000000000000000000000000000000000000000000000000000000000000000000000000107002c0a4c2e2048414d494c544f4e00000000000000000000000000000000000000000000000000000000000000000000000000010005374e432e205341494e5a00000000000000000000000000000000000000000000000000000000000000000000000000000000010f004d1b562e20424f54544153000000000000000000000000000000000000000000000000000000000000000000000000000000')

# Car Setup data
CarSetupData = binascii.unhexlify('e207010269b6f822031dff9463562141ac01000001b765ad4259917445b765ad42f051a040f051a0400078374387b52f4800000080131f00010000110006c06bb342f0f7c34100000000000000000000000000461244765f7f4800000080052e000000000f030220e3ab42f53ca941e073aa4200000000000000000008a344a009804800000080032e00000000050402e062ac4253fd05416018ab420000000000000000003d37446d847f4800000080042e0000000004040260acae42ab8b1e41a0c9ac42000000000000000000ea4f4490f3794800000080112d0000000013040260fbaf42184aa7425f60af42009bdf418055f041e010a845a4ba784800000080122c000200000a04026014ae423f1a1042008bad4200e2e3410000000000850b45ba517b48000000800c2d000100000704020037af429850834200a1ad42001bdb418017e841a0888445eb477d4800000080092d00020000090402a0f5af4274c29341a505ae42000000000000000000178a44d4377a48000000800f2d000000001204022079b042747f1f4180c2ad42000000000000000000595244fff5794800000080102d000000000b040200e8ad4278199c4207daad4200c3d94100bbec41404ca24508367e4800000080072d00020000010402a08aad4238801d42d026ad4200acdc410000000000ea1b454e937b48000000800b2d000100000804020006ae42747ad041d87fad420000000000000000809dd844e1d47a48000000800d2d000000000d04022094ae42f44ab2418256ad4200000000000000008051ac44497c7a48000000800e2d000000000e0402a0baad4218c19d425b92ac42005cdc41001ced41c0ffa245a43b7e4800000080062d0002000002040240aaaa42c082364240aaaa420021dc41000000000063334532f17b48000000800a2d000100000c040240d5ae42f8d49942cbbeae4200dfdd4100afef4100959f454e207e4800000080082d00020000060402003dab42ba45194240d7aa42803cda4100000000800d1a45b39a804800000080012e00010000000402cca5ae42d4867445cca5ae42f051a040f051a04000801443a306194800000080141b000100001000060083ab422e2c0e422001ab420015d7410000000000a10e45da83804800000080022e00010000030402')

# Telemetry data
CarTelemetryData = binascii.unhexlify('e207010669b6f822031dff9463562141ac01000001040000000000029d0d000068016401960193014a004a004c004c00540054005400540059000000ac410000ac410000b8410000b841fe006400000006392d00476902690236023002530052004c004c00540054005400540062000000ac410000ac410000b8410000b841fd006403000006262d0028de02dc02de02dd025400520050004d00550055005500550059000000ac410000ac410000b8410000b8410c010000160007652900004f024f027b027b025200520051005100540054005400540059000000ac410000ac410000b8410000b841b9000000000004a42c001c240324037d037d034f004f0050005000540054005400540059000000ac410000ac410000b8410000b841c1004807000005d8280000be02bd02e002de0256004e0057004d00540054005500540059000000ac410000ac410000b8410000b84183003a040000035129000034033603740376035200510052005000540054005500540059000000ac410000ac410000b8410000b841da004b00000005ad2c0031c602c902dd02e0025200550052005600540054005500550059000000ac410000ac410000b8410000b841a3004204000004ab28000031032f035e035d035100510050005100540054005500550059000000ac410000ac410000b8410000b841b60000001b0004a12b000429032903830383034e004e004f005000540054005400540059000000ac410000ac410000b8410000b8418a001d100000033e2a0000470346038b03890352004e0053004f00540054005400540059000000ac410000ac410000b8410000b8419e00000a0a00040526000080037f03bd03b9035500530055005400550055005500550059000000ac410000ac410000b8410000b84132016402000008612a000010020f02de01dd015b00530057005000550054005500540059000000ac410000ac410000b8410000b8410b01640500000797290000b102af02a602a502550051004f004d00550054005400540059000000ac410000ac410000b8410000b8418f002e10000003682b0006360335037703750352004e0055004f00540054005400540059000000ac410000ac410000b8410000b8418700190f000003ef2900005e035c039d0398035600520057005100550054005500550059000000ac410000ac410000b8410000b841a20000102e0004602600005a035a03b003af034f004f0050005000540054005400540059000000ac410000ac410000b8410000b841cb0000044200058e2800005c035c03860385035300540054005300550055005500550059000000ac410000ac410000b8410000b84103000000000002c90e000084018301a801a7014a004a004c004c00540054005400540059000000ac410000ac410000b8410000b841a3003afe00000403270000170319034a034c035200510051005000540054005500550059000000ac410000ac410000b8410000b84100000000')

# Car Status Data
PacketCarStatusData = binascii.unhexlify('e2070107bc3e2cc4735f5516860466432e260000010201003c0158fe9e420000d242bc34ab0d09001d1d1d1d031d1d1d1d000000000000000024744a0088c76548d3d2b7484b5b15490201013c0048e543410000d242bc34d70e09000404030202040403020000002604000011c8fc49028f5df3487f58644908b7b5490001023c00a7df96420000d242bc34cc1009001b1a1918031b1a191800000000000000415a714a03b7f3c94844b5964923a39e490001023c007f7eac420000d242bc34cc100900252523230325252323000000000000000024744a0366e1ac48b3836249bfdc67490001023c00d7d78e420000d242bc34cc100900080806090308080609003600000000007197674a035658b248b99d744913958c490001023c000aab98420000d242bc34cc10090017171515031717151500000000000002ea9e734a03b3703148456f0749ab5ae0480001023c00beaf8e420000d242bc34ab0d09001d1c1b1a031d1c1b1a000000000000000a166e4a0361cb0a4904b0b54914fcd7490001023c009ad474420000d2422035cc1009000a090807030a09080700000000000000d9244b4a03247de84570c463467c4ac5480001023c0092a78e420000d242bc34ab0d09000d0c0a0a020d0c0a0a290000000000007122744a03315cab480e008c4928e082490001023c00d0d598420000d242bc34cc100900161515140316151514000000000000005a70644a044536bc4834777049e64c98490001023c00afd68e420000d2422035cc10090025252323032525232300000000000000cded264a04d2ef43481dee1e49f90819490001023c00655d75420000d242bc34cc1009001f1e1c1c031f1e1c1c00000000000000f9d9714a0380740549c38ebe4975eed9490001023c000bc58e420000d242bc34d70e090021201f1e0321201f1e0000000000000011056b4a03167bc148b365994949fbac490001023c00bbb08e420000d242bc34ab0d0900171615140317161514000000000000020024744a03f9c4c548fa7d8b49259c93490001023c00f69b8e420000d2422035cc100900262524230326252423000000000000001864654a0441d244481648184934e322490001023c006bf74c420000d242bc34d70e090011100e0e0211100e0e00000000000000fd6a684a03648e3349a4ab024a496e154a0001023c0088b38e420000d2422035cc100900252523220325252322000000000000002744714a0382fb3748248bda48b94ac5480001023c00293498420000d2422035cc1009001a191817031a19181700000000000000a4136e4a03acab0f49648dcd49556ff2490201003c0175cd9f420000d242bc34d70e0900030303030203030303000000000000000024744a0088c765484b5b9548e2c1fc480001023c001767a2420000d2422035cc1009001c1b1a19031c1b1a1900000000000000129f724a0390b70d492c80d7493ee8e149')

counter = 0
dataGroup = [MotionData, SessionData, LapData, ParticipantData, CarSetupData, CarTelemetryData, PacketCarStatusData]
dataGroupName = ['MotionData', 'SessionData', 'LapData', 'ParticipantData', 'CarSetupData', 'CarTelemetryData', 'PacketCarStatusData']

sending_sock = socket.socket(socket.AF_INET, # Internet
                     socket.SOCK_DGRAM) # UDP
sending_sock.sendto(dataGroup[counter], (UDP_IP, UDP_PORT))



while True:
    # Rotate through the list of data packets
    counter+= 1
    if counter == 7:
        counter = 0


    # Sleeps for 2 seconds to slow down and actually be able to read the output it is sending
    time.sleep(2)
    print 'Sending', dataGroupName[counter]
    sending_sock.sendto(dataGroup[counter], (UDP_IP, UDP_PORT))
